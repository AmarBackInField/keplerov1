app = "aistein-inbound"
primary_region = "fra"

kill_signal = "SIGINT"
kill_timeout = 10

[build]
  dockerfile = "Dockerfile.inbound"

[env]
  PYTHONUNBUFFERED = "1"
  LOG_LEVEL = "INFO"

# ============================
# PROCESS CONFIG
# ============================
[processes]
  agent = "python voice_backend/inboundService/entry.py start"

# ============================
# MACHINE CONFIG (IMPORTANT)
# ============================
[[vm]]
  cpu_kind = "performance"
  cpus = 4
  memory_mb = 8192
  processes = ["agent"]

# ============================
# NETWORKING (UDP + WebRTC)
# ============================
[[services]]
  internal_port = 7880
  protocol = "udp"
  processes = ["agent"]

  [[services.ports]]
    port = 7880

# ============================
# PREVENT COLD STARTS
# ============================
[experimental]
  auto_stop_machines = false
  auto_start_machines = true
